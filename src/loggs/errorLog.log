[ERROR|dependency_auth|L53] 2024-03-09T15:56:39+0300: Non authorized user
[WARNING|bcrypt|L622] 2024-03-09T16:32:04+0300: (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\User\projects\venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
[ERROR|dependency_auth|L53] 2024-03-09T16:43:05+0300: Non authorized user
[WARNING|basereload|L54] 2024-03-09T16:47:43+0300: StatReload detected changes in 'authorization\security.py'. Reloading...
[WARNING|bcrypt|L622] 2024-03-09T16:57:09+0300: (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\User\projects\venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
[ERROR|security|L21] 2024-03-09T16:57:09+0300: An exception occurred: <class 'src.authorization.exceptions.PasswordVerificationError'>
NoneType: None
[WARNING|bcrypt|L622] 2024-03-09T19:27:31+0300: (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\User\projects\venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
[WARNING|basereload|L54] 2024-03-09T19:34:36+0300: StatReload detected changes in 'middlewares\log_middleware.py'. Reloading...
[WARNING|basereload|L54] 2024-03-09T19:37:58+0300: StatReload detected changes in 'middlewares\log_middleware.py'. Reloading...
[WARNING|basereload|L54] 2024-03-09T19:42:15+0300: StatReload detected changes in 'middlewares\log_middleware.py'. Reloading...
[WARNING|basereload|L54] 2024-03-09T19:45:40+0300: StatReload detected changes in 'middlewares\log_middleware.py'. Reloading...
[WARNING|bcrypt|L622] 2024-03-09T21:39:21+0300: (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\User\projects\venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
[ERROR|h11_impl|L417] 2024-03-09T21:44:21+0300: Exception in ASGI application
Traceback (most recent call last):
  File "C:\Users\User\projects\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 412, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\User\projects\fastProject\src\middlewares\log_middleware.py", line 14, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 299, in handle
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 79, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 74, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\routing.py", line 299, in app
    raise e
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\fastProject\src\routers\conversations.py", line 124, in add_user_to_conversation
    await conv_repo.add_user(
          ^^^^^^^^^^^^^^^^^^^
TypeError: ConversationRepository.add_user() got an unexpected keyword argument 'current_user'
[ERROR|websockets_impl|L266] 2024-03-09T21:49:02+0300: Exception in ASGI application
Traceback (most recent call last):
  File "C:\Users\User\projects\venv\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 259, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\middleware\errors.py", line 151, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\fastProject\src\middlewares\log_middleware.py", line 14, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 375, in handle
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 98, in app
    await wrap_app_handling_exceptions(app, session)(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 96, in app
    await func(session)
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\routing.py", line 350, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   ^^^^^^^^^^^^^^^^^^
TypeError: _get_auth_user() missing 1 required positional argument: 'request'
[ERROR|websockets_impl|L266] 2024-03-09T21:49:20+0300: Exception in ASGI application
Traceback (most recent call last):
  File "C:\Users\User\projects\venv\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 259, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\middleware\errors.py", line 151, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\fastProject\src\middlewares\log_middleware.py", line 14, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 375, in handle
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 98, in app
    await wrap_app_handling_exceptions(app, session)(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 96, in app
    await func(session)
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\routing.py", line 350, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   ^^^^^^^^^^^^^^^^^^
TypeError: _get_auth_user() missing 1 required positional argument: 'request'
[ERROR|dependency_auth|L51] 2024-03-09T21:51:18+0300: Non authorized user
[ERROR|dependency_auth|L51] 2024-03-09T21:51:18+0300: Non authorized user
[ERROR|websockets_impl|L266] 2024-03-09T21:57:09+0300: Exception in ASGI application
Traceback (most recent call last):
  File "C:\Users\User\projects\venv\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 259, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\middleware\errors.py", line 151, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\fastProject\src\middlewares\log_middleware.py", line 14, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 375, in handle
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 98, in app
    await wrap_app_handling_exceptions(app, session)(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 96, in app
    await func(session)
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\routing.py", line 350, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   ^^^^^^^^^^^^^^^^^^
TypeError: _get_auth_user() missing 1 required positional argument: 'request'
[ERROR|websockets_impl|L266] 2024-03-09T21:58:38+0300: Exception in ASGI application
Traceback (most recent call last):
  File "C:\Users\User\projects\venv\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 259, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\middleware\errors.py", line 151, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\fastProject\src\middlewares\log_middleware.py", line 14, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 375, in handle
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 98, in app
    await wrap_app_handling_exceptions(app, session)(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 96, in app
    await func(session)
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\routing.py", line 350, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   ^^^^^^^^^^^^^^^^^^
TypeError: _get_auth_user() missing 1 required positional argument: 'request'
[ERROR|dependency_auth|L51] 2024-03-09T22:00:25+0300: Non authorized user
[ERROR|dependency_auth|L51] 2024-03-09T22:00:25+0300: Non authorized user
[ERROR|dependency_auth|L51] 2024-03-09T22:01:16+0300: Non authorized user
[ERROR|dependency_auth|L51] 2024-03-09T22:01:16+0300: Non authorized user
[ERROR|dependency_auth|L51] 2024-03-09T22:01:19+0300: Non authorized user
[ERROR|dependency_auth|L51] 2024-03-09T22:01:19+0300: Non authorized user
[WARNING|basereload|L54] 2024-03-09T22:01:45+0300: StatReload detected changes in 'main.py'. Reloading...
[WARNING|basereload|L54] 2024-03-09T22:01:59+0300: StatReload detected changes in 'main.py'. Reloading...
[WARNING|basereload|L54] 2024-03-09T22:15:27+0300: StatReload detected changes in 'main.py'. Reloading...
[ERROR|websockets_impl|L266] 2024-03-09T22:15:45+0300: Exception in ASGI application
Traceback (most recent call last):
  File "C:\Users\User\projects\venv\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 259, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\middleware\errors.py", line 151, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\fastProject\src\middlewares\log_middleware.py", line 14, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 758, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 778, in app
    await route.handle(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 375, in handle
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 98, in app
    await wrap_app_handling_exceptions(app, session)(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\routing.py", line 96, in app
    await func(session)
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\routing.py", line 350, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 598, in solve_dependencies
    solved = await call(**sub_values)
                   ^^^^^^^^^^^^^^^^^^
TypeError: _get_auth_user() missing 1 required positional argument: 'request'
[WARNING|basereload|L54] 2024-03-09T22:20:19+0300: StatReload detected changes in 'middlewares\auth_middleware.py'. Reloading...
[WARNING|basereload|L54] 2024-03-09T22:21:22+0300: StatReload detected changes in 'middlewares\auth_middleware.py'. Reloading...
[WARNING|basereload|L54] 2024-03-09T22:25:40+0300: StatReload detected changes in 'middlewares\auth_middleware.py'. Reloading...
[WARNING|basereload|L54] 2024-03-09T22:30:54+0300: StatReload detected changes in 'middlewares\auth_middleware.py'. Reloading...
[WARNING|basereload|L54] 2024-03-09T22:39:25+0300: StatReload detected changes in 'middlewares\auth_middleware.py'. Reloading...
[WARNING|basereload|L54] 2024-03-09T22:42:07+0300: StatReload detected changes in 'middlewares\auth_middleware.py'. Reloading...
[WARNING|basereload|L54] 2024-03-09T22:47:33+0300: StatReload detected changes in 'middlewares\auth_middleware.py'. Reloading...
[WARNING|basereload|L54] 2024-03-09T22:51:14+0300: StatReload detected changes in 'middlewares\auth_middleware.py'. Reloading...
[WARNING|basereload|L54] 2024-03-09T22:59:58+0300: StatReload detected changes in 'main.py'. Reloading...
[ERROR|websockets_impl|L266] 2024-03-09T23:01:49+0300: Exception in ASGI application
Traceback (most recent call last):
  File "C:\Users\User\projects\venv\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 259, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\middleware\errors.py", line 151, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\fastProject\src\middlewares\log_middleware.py", line 14, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\fastProject\src\middlewares\auth_middleware.py", line 16, in __call__
    token_type, token = scope['headers']['Authorization'].split()
                        ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
TypeError: list indices must be integers or slices, not str
[WARNING|basereload|L54] 2024-03-09T23:15:35+0300: StatReload detected changes in 'middlewares\auth_middleware.py'. Reloading...
[WARNING|basereload|L54] 2024-03-09T23:24:43+0300: StatReload detected changes in 'middlewares\auth_middleware.py'. Reloading...
[WARNING|bcrypt|L622] 2024-03-09T23:25:42+0300: (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "C:\Users\User\projects\venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
[ERROR|auth_middleware|L19] 2024-03-09T23:27:09+0300: No Authorization in headers
[ERROR|websockets_impl|L266] 2024-03-09T23:27:09+0300: Exception in ASGI application
Traceback (most recent call last):
  File "C:\Users\User\projects\venv\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 259, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\middleware\errors.py", line 151, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\fastProject\src\middlewares\log_middleware.py", line 14, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\fastProject\src\middlewares\auth_middleware.py", line 21, in __call__
    await response(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\responses.py", line 151, in __call__
    await send(
  File "C:\Users\User\projects\venv\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 342, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Expected ASGI message 'websocket.accept', 'websocket.close', or 'websocket.http.response.start' but got 'http.response.start'.
[ERROR|auth_middleware|L19] 2024-03-09T23:28:00+0300: No Authorization in headers
[ERROR|websockets_impl|L266] 2024-03-09T23:28:00+0300: Exception in ASGI application
Traceback (most recent call last):
  File "C:\Users\User\projects\venv\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 259, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User\projects\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\middleware\errors.py", line 151, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\fastProject\src\middlewares\log_middleware.py", line 14, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\User\projects\fastProject\src\middlewares\auth_middleware.py", line 21, in __call__
    await response(scope, receive, send)
  File "C:\Users\User\projects\venv\Lib\site-packages\starlette\responses.py", line 151, in __call__
    await send(
  File "C:\Users\User\projects\venv\Lib\site-packages\uvicorn\protocols\websockets\websockets_impl.py", line 342, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Expected ASGI message 'websocket.accept', 'websocket.close', or 'websocket.http.response.start' but got 'http.response.start'.
[WARNING|basereload|L54] 2024-03-09T23:32:13+0300: StatReload detected changes in 'middlewares\auth_middleware.py'. Reloading...
[ERROR|auth_middleware|L20] 2024-03-09T23:34:45+0300: websocket Protocol: /9059d519-51d5-47a8-ad22-da2c78a0e074/ws No Authorization in headers
[WARNING|basereload|L54] 2024-03-09T23:37:10+0300: StatReload detected changes in 'middlewares\log_middleware.py'. Reloading...
